<section class="py-24 bg-brand-light">
  <div class="max-w-7xl mx-auto px-4">

    <!-- Section Header -->
    <div class="text-center mb-16">
      <span class="inline-block px-4 py-2 rounded-full bg-amber-100 text-amber-700 text-xs font-semibold tracking-widest uppercase">
        Just Arrived
      </span>

      <h2 class="mt-6 text-4xl md:text-5xl font-serif font-bold text-gray-900">
        Latest <span class="bg-gradient-to-r from-amber-600 to-amber-500 bg-clip-text text-transparent">Products</span>
      </h2>

      <p class="mt-4 text-gray-500 max-w-2xl mx-auto">
        Discover our newest additions curated with quality and elegance.
      </p>
    </div>

    <!-- Product Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10">

      {% for product in latest_products %}
      <div class="group bg-white border border-gray-200 rounded-2xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-500 hover:-translate-y-2">

        <!-- Image -->
        <div class="relative aspect-[4/5] overflow-hidden bg-gray-100">
          <a href="{% url 'product_detail' product.pk product.slug %}">
            {% if product.get_primary_image_url %}
              <img src="{{ product.get_primary_image_url }}"
                   class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
                   alt="{{ product.name }}">
            {% else %}
              <div class="flex items-center justify-center h-full text-gray-400">
                <i class="fas fa-image text-3xl"></i>
              </div>
            {% endif %}
          </a>

          <!-- New Badge -->
          <span class="absolute top-4 left-4 bg-amber-600 text-white text-[10px] font-bold uppercase tracking-widest px-3 py-1 rounded-full shadow">
            New
          </span>
        </div>

        <!-- Content -->
        <div class="p-5 flex flex-col">

          <div class="text-xs text-gray-500 mb-2">
            {{ product.category.name }}
          </div>

          <h3 class="font-semibold text-lg text-gray-900 mb-2 line-clamp-2 group-hover:text-amber-700 transition-colors">
            <a href="{% url 'product_detail' product.pk product.slug %}">
              {{ product.name }}
            </a>
          </h3>

          <!-- Rating -->
          <div class="flex items-center gap-2 text-sm mb-3">
            <i class="fas fa-star text-amber-400"></i>
            <span class="font-medium text-gray-700">
              {{ product.avg_rating|default:0|floatformat:1 }}
            </span>
          </div>

          <!-- Price -->
          <div class="mt-auto flex items-center justify-between pt-3 border-t border-gray-100">

            <span class="text-xl font-bold text-gray-900">
              â‚¹{{ product.price }}
            </span>

            {% if product.available_stock > 0 %}
              <a href="{% url 'add_to_cart' product.pk %}"
                 class="px-4 py-2 text-xs font-semibold bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition">
                Add to Cart
              </a>
            {% else %}
              <span class="text-xs text-red-500 font-semibold">
                Out of Stock
              </span>
            {% endif %}

          </div>
        </div>

      </div>
      {% endfor %}

    </div>

    <!-- View More Button -->
    <div class="text-center mt-16">
      <a href="/shop"
         class="inline-block px-10 py-4 bg-gray-900 text-white text-sm font-semibold tracking-widest uppercase rounded-full hover:bg-black transition transform hover:-translate-y-1 shadow-lg">
        View More Products
      </a>
    </div>

  </div>
</section>