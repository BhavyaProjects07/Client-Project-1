<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Payment - Devki Mart</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Alpine.js for interactivity -->
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Playfair+Display:wght@600;700;800&display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            amber: {
              50: '#fef9f0',
              100: '#fdf2e1',
              200: '#fce4c4',
              300: '#f9d0a0',
              400: '#f5b866',
              500: '#eea13d',
              600: '#d98118',
              700: '#c1660f',
              800: '#9f520d',
              900: '#804209',
            },
          },
          boxShadow: {
            'soft': '0 4px 20px rgba(0, 0, 0, 0.05)',
            'glow': '0 0 25px rgba(238, 161, 61, 0.2)',
            'premium': '0 10px 40px rgba(0, 0, 0, 0.1)',
          },
          backdropBlur: {
            'xs': '2px',
          }
        },
        fontFamily: {
          sans: ['Inter', 'sans-serif'],
          serif: ['Playfair Display', 'serif'],
        }
      }
    }
  </script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #fef9f0 0%, #fff8f0 50%, #fffbf5 100%);
      background-attachment: fixed;
    }

    /* <CHANGE> Updated animations and transitions */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes scaleIn {
      from { opacity: 0; transform: scale(0.92); }
      to { opacity: 1; transform: scale(1); }
    }

    @keyframes shimmer {
      0% { background-position: -1000px 0; }
      100% { background-position: 1000px 0; }
    }

    @keyframes glow {
      0%, 100% { box-shadow: 0 0 20px rgba(238, 161, 61, 0.3), inset 0 0 10px rgba(238, 161, 61, 0.1); }
      50% { box-shadow: 0 0 30px rgba(238, 161, 61, 0.5), inset 0 0 15px rgba(238, 161, 61, 0.2); }
    }
    
    .fade-in { animation: fadeIn 0.5s ease-out forwards; }
    .slide-up { animation: slideUp 0.6s ease-out forwards; }
    .scale-in { animation: scaleIn 0.5s ease-out forwards; }
    
    /* <CHANGE> Enhanced payment card with amber theme */
    .payment-card {
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
      border: 2px solid rgba(238, 161, 61, 0.2);
      background: linear-gradient(135deg, #ffffff 0%, rgba(254, 249, 240, 0.5) 100%);
    }
    
    .payment-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(238, 161, 61, 0.1), transparent);
      transition: left 0.5s ease;
    }

    .payment-card:hover {
      border-color: rgba(238, 161, 61, 0.5);
      box-shadow: 0 8px 32px rgba(238, 161, 61, 0.15);
      transform: translateY(-4px);
    }

    .payment-card:hover::before {
      left: 100%;
    }
    
    /* <CHANGE> Enhanced selected state */
    .payment-card.selected {
      border-color: #eea13d;
      background: linear-gradient(135deg, rgba(238, 161, 61, 0.08) 0%, rgba(238, 161, 61, 0.04) 100%);
      box-shadow: 0 12px 40px rgba(238, 161, 61, 0.25), inset 0 0 20px rgba(238, 161, 61, 0.05);
    }

    .payment-card.selected::after {
      content: 'âœ“';
      position: absolute;
      top: 12px;
      right: 12px;
      width: 32px;
      height: 32px;
      background: linear-gradient(135deg, #eea13d 0%, #d98118 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 18px;
      box-shadow: 0 4px 12px rgba(238, 161, 61, 0.3);
      animation: scaleIn 0.3s ease-out;
    }
    
    .check-icon { display: none; }
    
    .payment-icon {
      transition: transform 0.3s ease;
      position: relative;
      background: linear-gradient(135deg, #fef9f0 0%, #fffbf5 100%);
      border: 1.5px solid rgba(238, 161, 61, 0.2);
    }
    
    .payment-card:hover .payment-icon {
      transform: scale(1.15) rotate(5deg);
    }

    /* <CHANGE> Enhanced submit button with amber theme */
    .submit-btn {
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      background: linear-gradient(135deg, #eea13d 0%, #d98118 100%);
      font-weight: 600;
      letter-spacing: 0.5px;
    }

    .submit-btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
      transform: translate(-50%, -50%) scale(0);
      transition: transform 0.5s ease-out;
    }
    
    .submit-btn:hover {
      box-shadow: 0 12px 32px rgba(238, 161, 61, 0.4);
      transform: translateY(-2px);
    }

    .submit-btn:hover::before {
      transform: translate(-50%, -50%) scale(2);
    }

    .submit-btn:active {
      transform: translateY(0);
    }
    
    /* <CHANGE> Premium container styling */
    .payment-container {
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.08);
      background: linear-gradient(180deg, #ffffff 0%, #fffbf5 100%);
      border: 1.5px solid rgba(238, 161, 61, 0.15);
    }
    
    .staggered-item {
      animation: slideUp 0.5s ease-out forwards;
    }
    
    .staggered-item:nth-child(1) { animation-delay: 0ms; }
    .staggered-item:nth-child(2) { animation-delay: 100ms; }
    .staggered-item:nth-child(3) { animation-delay: 200ms; }
    .staggered-item:nth-child(4) { animation-delay: 300ms; }
    
    /* <CHANGE> Enhanced payment header */
    .payment-header {
      position: relative;
    }
    
    .payment-header::after {
      content: '';
      position: absolute;
      bottom: -12px;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 4px;
      background: linear-gradient(90deg, transparent, #eea13d, transparent);
      border-radius: 2px;
    }

    .payment-header-icon {
      background: linear-gradient(135deg, #fdf2e1 0%, #fce4c4 100%);
      animation: glow 3s ease-in-out infinite;
    }
    
    /* <CHANGE> Enhanced summary box */
    .summary-box {
      background: linear-gradient(135deg, #fdf2e1 0%, rgba(253, 242, 225, 0.5) 100%);
      border: 1.5px solid rgba(238, 161, 61, 0.3);
      box-shadow: inset 0 2px 8px rgba(238, 161, 61, 0.05);
    }

    .price-highlight {
      background: linear-gradient(135deg, #eea13d 0%, #d98118 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .secure-badge {
      transition: all 0.3s ease;
      padding: 8px 16px;
      background: rgba(238, 161, 61, 0.1);
      border-radius: 20px;
      border: 1px solid rgba(238, 161, 61, 0.2);
    }
    
    .secure-badge:hover {
      transform: translateY(-2px);
      background: rgba(238, 161, 61, 0.15);
      border-color: rgba(238, 161, 61, 0.4);
    }

    .payment-methods-row {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
    }

    .payment-method-badge {
      padding: 6px 12px;
      background: linear-gradient(135deg, #fef9f0 0%, #fffbf5 100%);
      border: 1.5px solid rgba(238, 161, 61, 0.2);
      border-radius: 20px;
      transition: all 0.3s ease;
    }

    .payment-method-badge:hover {
      border-color: rgba(238, 161, 61, 0.5);
      background: linear-gradient(135deg, #fdf2e1 0%, #fce4c4 100%);
    }

    .step-badge {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: linear-gradient(135deg, #eea13d 0%, #d98118 100%);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 14px;
      box-shadow: 0 4px 12px rgba(238, 161, 61, 0.3);
    }

    /* Custom position for SweetAlert2 */
    .custom-swal-position {
      top: 20%;
    }

    .animated-underline {
      position: relative;
      display: inline-block;
    }

    .animated-underline::after {
      content: '';
      position: absolute;
      bottom: -4px;
      left: 0;
      width: 0;
      height: 2px;
      background: linear-gradient(90deg, #eea13d, #d98118);
      transition: width 0.4s ease;
    }

    .payment-card:hover .animated-underline::after {
      width: 100%;
    }
  </style>
</head>
<body class="min-h-screen py-12 px-4 sm:px-6 lg:px-8">
  <div class="max-w-3xl mx-auto payment-container rounded-2xl p-8 sm:p-12 slide-up">
    
    <!-- <CHANGE> Redesigned header with enhanced styling -->
    <div class="text-center mb-12 payment-header">
      <div class="inline-flex items-center justify-center w-20 h-20 payment-header-icon rounded-full mb-6">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-amber-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3 10h18M7 15h10m4 0a2 2 0 11-4 0 2 2 0 014 0zM7 6a2 2 0 11-4 0 2 2 0 014 0z" />
        </svg>
      </div>
      <h1 class="text-4xl sm:text-5xl font-serif font-bold text-gray-900 mb-2">Secure Checkout</h1>
      <p class="text-lg text-gray-600 font-light">Complete your purchase with confidence</p>
    </div>
    
    <form method="POST" class="space-y-10">
      {% csrf_token %}

      <!-- <CHANGE> Enhanced payment options section -->
      <div class="space-y-6">
        <div class="flex items-center gap-3 mb-8">
          <div class="step-badge">1</div>
          <h2 class="text-2xl font-bold text-gray-900">Choose Payment Method</h2>
        </div>

        <!-- Payment Options Grid -->
        <div class="grid sm:grid-cols-2 gap-6">
          <!-- Credit/Debit Card -->
          <div class="staggered-item">
            <label class="cursor-pointer block rounded-xl overflow-hidden payment-card transition-all duration-300">
              <input type="radio" name="payment_method" value="card" class="hidden" onchange="handlePaymentSelection(this)">
              <div class="p-6">
                <div class="flex items-center gap-4">
                  <div class="bg-gradient-to-br from-amber-50 to-amber-100 p-4 rounded-xl shadow-soft payment-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-amber-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h10m4 0a2 2 0 11-4 0 2 2 0 014 0zM7 6a2 2 0 11-4 0 2 2 0 014 0z" />
                    </svg>
                  </div>
                  <div>
                    <h3 class="font-semibold text-lg text-gray-900">Credit/Debit Card</h3>
                    <p class="text-sm text-gray-500 mt-1">Visa, MasterCard, Rupay</p>
                  </div>
                </div>
              </div>
            </label>
          </div>
          
          <!-- UPI -->
          <div class="staggered-item">
            <label class="cursor-pointer block rounded-xl overflow-hidden payment-card transition-all duration-300">
              <input type="radio" name="payment_method" value="upi" class="hidden" onchange="handlePaymentSelection(this)">
              <div class="p-6">
                <div class="flex items-center gap-4">
                  <div class="bg-gradient-to-br from-amber-50 to-amber-100 p-4 rounded-xl shadow-soft payment-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-amber-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z" />
                    </svg>
                  </div>
                  <div>
                    <h3 class="font-semibold text-lg text-gray-900">UPI Payment</h3>
                    <p class="text-sm text-gray-500 mt-1">Google Pay, PhonePe, Paytm</p>
                  </div>
                </div>
              </div>
            </label>
          </div>
          
          <!-- Net Banking -->
          <div class="staggered-item">
            <label class="cursor-pointer block rounded-xl overflow-hidden payment-card transition-all duration-300">
              <input type="radio" name="payment_method" value="netbanking" class="hidden" onchange="handlePaymentSelection(this)">
              <div class="p-6">
                <div class="flex items-center gap-4">
                  <div class="bg-gradient-to-br from-amber-50 to-amber-100 p-4 rounded-xl shadow-soft payment-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-amber-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                    </svg>
                  </div>
                  <div>
                    <h3 class="font-semibold text-lg text-gray-900">Net Banking</h3>
                    <p class="text-sm text-gray-500 mt-1">All major banks supported</p>
                  </div>
                </div>
              </div>
            </label>
          </div>
          
          <!-- Cash on Delivery -->
          <div class="staggered-item">
            <label class="cursor-pointer block rounded-xl overflow-hidden payment-card transition-all duration-300">
              <input type="radio" name="payment_method" value="cod" class="hidden" onchange="handlePaymentSelection(this)">
              <div class="p-6">
                <div class="flex items-center gap-4">
                  <div class="bg-gradient-to-br from-amber-50 to-amber-100 p-4 rounded-xl shadow-soft payment-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-amber-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                  </div>
                  <div>
                    <h3 class="font-semibold text-lg text-gray-900">Cash on Delivery</h3>
                    <p class="text-sm text-gray-500 mt-1">Pay when you receive</p>
                  </div>
                </div>
              </div>
            </label>
          </div>
        </div>
      </div>

      <!-- <CHANGE> Enhanced summary section -->
      <div class="border-t border-amber-200 pt-10">
        <div class="flex items-center gap-3 mb-6">
          <div class="step-badge">2</div>
          <h2 class="text-2xl font-bold text-gray-900">Order Summary</h2>
        </div>

        <div class="summary-box p-6 rounded-xl mb-8">
          <div class="space-y-3">
            <div class="flex justify-between items-center">
              <span class="text-gray-700">Subtotal</span>
              <span class="font-semibold text-gray-900">â‚¹{{ total }}</span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-gray-700">Shipping</span>
              <span class="font-semibold text-amber-600">Free</span>
            </div>
            <div class="flex justify-between items-center pt-3 border-t border-amber-300">
              <span class="text-lg font-bold text-gray-900">Total Amount</span>
              <span class="text-2xl font-bold price-highlight">â‚¹{{ total }}</span>
            </div>
          </div>
        </div>
        
        <!-- <CHANGE> Enhanced submit button -->
        <button type="submit" class="submit-btn w-full text-white font-semibold py-4 px-6 rounded-xl transition-all duration-200 shadow-lg hover:shadow-premium text-lg">
          ðŸ’³ Proceed to Payment
        </button>

        <!-- Trust indicators -->
        <div class="mt-6 flex items-center justify-center gap-4 text-sm text-gray-600">
          <div class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-amber-600" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd" />
            </svg>
            <span>SSL Encrypted</span>
          </div>
          <div class="w-1 h-1 bg-gray-400 rounded-full"></div>
          <div class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-amber-600" fill="currentColor" viewBox="0 0 20 20">
              <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM9 10a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span>Verified</span>
          </div>
          <div class="w-1 h-1 bg-gray-400 rounded-full"></div>
          <div class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-amber-600" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 3.002v.952a3.066 3.066 0 01-2.812 3.002 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-3.002v-.952a3.066 3.066 0 012.812-3.002z" clip-rule="evenodd" />
            </svg>
            <span>Secure</span>
          </div>
        </div>
      </div>
    </form>

    <!-- <CHANGE> Enhanced payment methods display -->
    <div class="mt-12 pt-8 border-t border-amber-200">
      <p class="text-center text-sm text-gray-600 mb-4 font-medium">We accept all major payment methods</p>
      <div class="payment-methods-row">
        <div class="payment-method-badge flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor" style="color: #1A1F71;">
            <rect width="24" height="24" rx="4" fill="currentColor"/>
          </svg>
          <span class="text-sm font-medium text-gray-700">Visa</span>
        </div>
        <div class="payment-method-badge flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor" style="color: #FF5F00;">
            <circle cx="10" cy="12" r="7" fill="#EB001B"/>
            <circle cx="14" cy="12" r="7" fill="#FF5F00"/>
          </svg>
          <span class="text-sm font-medium text-gray-700">Mastercard</span>
        </div>
        <div class="payment-method-badge flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-amber-600">
            <circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="2"/>
            <path d="M12 6v12M6 12h12" stroke="currentColor" stroke-width="1.5"/>
          </svg>
          <span class="text-sm font-medium text-gray-700">RuPay</span>
        </div>
        <div class="payment-method-badge flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor" style="color: #5469D4;">
            <path fill="currentColor" d="M0 0h24v24H0z"/>
          </svg>
          <span class="text-sm font-medium text-gray-700">Google Pay</span>
        </div>
        <div class="payment-method-badge flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600">
            <circle cx="12" cy="12" r="9" fill="none" stroke="currentColor" stroke-width="1.5"/>
          </svg>
          <span class="text-sm font-medium text-gray-700">PhonePe</span>
        </div>
        <div class="payment-method-badge flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-indigo-600">
            <rect width="18" height="12" rx="2" fill="none" stroke="currentColor" stroke-width="1.5"/>
          </svg>
          <span class="text-sm font-medium text-gray-700">Paytm</span>
        </div>
      </div>
    </div>

    <!-- <CHANGE> Secure badge at bottom -->
    <div class="mt-8 flex items-center justify-center">
      <div class="secure-badge">
        <div class="flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-amber-600" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd" />
          </svg>
          <span class="font-medium text-gray-700">100% Secure & Encrypted Payment</span>
        </div>
      </div>
    </div>
  </div>

  <!-- <CHANGE> JavaScript for payment selection interaction -->
  <script>
    function handlePaymentSelection(radioInput) {
      // Remove selected class from all cards
      document.querySelectorAll('.payment-card').forEach(card => {
        card.classList.remove('selected');
      });
      // Add selected class to parent card of clicked radio
      radioInput.closest('.payment-card').classList.add('selected');
    }

    // Set initial selection
    document.addEventListener('DOMContentLoaded', function() {
      const checkedRadio = document.querySelector('input[name="payment_method"]:checked');
      if (checkedRadio) {
        checkedRadio.closest('.payment-card').classList.add('selected');
      }
    });

    // Allow keyboard navigation
    document.querySelectorAll('input[name="payment_method"]').forEach(radio => {
      radio.addEventListener('change', function() {
        handlePaymentSelection(this);
      });
    });
  </script>

{% if messages %}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  {% for message in messages %}
    Swal.fire({
      toast: true,
      icon: "{{ message.tags }}",
      title: "{{ message }}",
      position: 'top',
      customClass: {
        popup: 'custom-swal-position'
      },
      showConfirmButton: false,
      timer: 2000,
      timerProgressBar: true,
    });
  {% endfor %}
</script>
{% endif %}
</body>
</html>